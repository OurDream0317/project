<!DOCTYPE html>
<html>
<head>
    <title>轮播</title>
    <link rel="stylesheet" href="https://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="../layui/css/layui.css" media="all">
    <script src="../layui/layui.all.js"></script>
    <script>
        $(function () {
            $('#myCarousel').carousel({interval: 2000});
            $.get("/image/selectStatus2", function (data) {
                console.log(data)
                var data1 = JSON.parse(data);
                $.each(data1, function (index, obj) {
                    $("#img" + (index + 1)).attr("src", obj.iurl);

                })
            });
        })
    </script>
    <style>
        #myCarousel {
            display: table-cell;
            vertical-align: middle;
        }

    </style>
</head>
<body>
<div class="row">
    <div class="col-md-7">
        <div id="myCarousel" class="carousel slide">
            <ol class="carousel-indicators">
                <li data-target='#myCarousel' data-slide-to="0" class="active"></li>
                <li data-target='#myCarousel' data-slide-to="1"></li>
                <li data-target='#myCarousel' data-slide-to="2"></li>
                <li data-target='#myCarousel' data-slide-to="3"></li>
            </ol>
            <div class="carousel-inner">
                <div class="item active">
                    <img id="img1" alt="first slide" style="width: 800px;height:500px"/>
                </div>
                <div class="item">
                    <img id="img2" alt="second slide" style="width: 800px;height:500px"/>
                </div>
                <div class="item">
                    <img id="img3" alt="third slide" style="width: 800px;height:500px"/>
                </div>
                <div class="item">
                    <img id="img4" alt="third slide" style="width: 800px;height:500px"/>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-5">
        <div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">
            <ul class="layui-tab-title">
                <li class="layui-this">校园资讯</li>
                <li>学生文采</li>
                <li>校园美景</li>
                <li>优秀教师</li>
                <li>优秀学生</li>
            </ul>
            <div class="layui-tab-content" style="height: 100px;">
                <div class="layui-tab-item layui-show" id="view">

                </div>
                <div class="layui-tab-item">内容2</div>
                <div class="layui-tab-item">内容3</div>
                <div class="layui-tab-item">内容4</div>
                <div class="layui-tab-item">内容5</div>
            </div>
        </div>
    </div>
</div>
</body>
<script id="demo" type="text/html">
    {{# layui.each(d, function(index, item){ }}
    <div class="layui-card-header" style="border-bottom: 2px dashed #75787b">
        <span style="font-size: 15px;color: #2D93CA">{{item.title}}</span>
        <a href="#" onclick="newsBtn('{{item.id}}')">
            <span style="float: right;font-size: 20px;color: #2e9ad0">详情</span>
        </a>
    </div>
    {{# }); }}
</script>
<script id="demo1" type="text/html">
    <h1 id="newTitle" style="text-align: center"></h1>
    <br><br>
    <div style="text-align: center"><span id="newAutor"  style="font-size: 20px"></span >&nbsp;&nbsp;&nbsp;&nbsp;<span id="newTime" style="font-size: 20px"></span></div>
    <br><br>
    <div id="center" style="margin-left: 50px;margin-right: 50px"></div>
    </div>
</script>
<script>
    layui.use(['layer', 'laytpl', 'form', 'jquery'], function () {
        var laytpl = layui.laytpl;
        var layer = layui.layer;
        var getTpl = demo.innerHTML;
        var view = document.getElementById('view');
        view.innerHTML = "";
        var index = layer.load(1); //添加laoding,0-2两种方
        $.ajax({
            url: "/news/selectNewsByAdmin",
            type: "POST",
            dataType: 'json',
            success: function (result) {
                layer.close(index);
                laytpl(getTpl).render(result, function (html) {
                    view.innerHTML = html;
                });
                layui.form.render();
            },
            error: function (xhr) {
                layer.msg("请求出错(请检查相关网络状况.)");
            }
        });
    });

    function newsBtn(id) {
        $.ajax({
            url: "/news/selectByPk2",
            type: "POST",
            data: {"id": id},
            success: function (result) {
                var data = JSON.parse(result);
                $("#newTitle").text(data.title);
                $("#newAutor").text(data.autor);
                $("#newTime").text(data.time);
                $("#center").append(data.content);
            },
            error: function () {
                layer.msg("请检查网络异常")
            }

        });
        layui.use('layer', function () {
            var view_page = layer.open({
                type: 1 //Page层类型
                , shade: 0.6 //遮罩透明度
                , anim: 1 //0-6的动画形式，-1不开启
                , title: false
                , content: $('#demo1').html()
            });
            layer.full(view_page);
        });
    }

</script>
</html>